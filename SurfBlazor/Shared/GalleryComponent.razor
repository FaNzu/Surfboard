@using SurfBlazorLibrary.Product
@using SurfBlazorLibrary.Product.Models

<h1>Galleri</h1>

<button @onclick="() => BackImage()">
	Former image
</button>

@if (imageSource is not null)
{
	<p>
		<img src="@imageSource" height="300" />
	</p>
}

<button @onclick="() => NextImage()">
	Next image
</button>

@code {
	[Parameter]
	public ProductModel? Product { get; set; }
	private int imageId = 1;
	private string? imageSource;

	protected override void OnInitialized()
	{
		// Check if Product is not null and has a valid Name before setting imageSource
		if (Product != null && !string.IsNullOrEmpty(Product.Name))
		{
			imageSource = $"images/{Product.Name}1.png";
		}
	}
}

@functions {
	private void NextImage()
	{
		if (imageId == 4) imageId = 1;
		else imageId++;
		imageSource = $"images/{Product.Name}{imageId}.png";
	}

	private void BackImage()
	{
		if (imageId == 1) imageId = 4;
		else imageId--;
		imageSource = $"images/{Product.Name}{imageId}.png";
	}
}